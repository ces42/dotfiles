#!/bin/sh

pid=$(pgrep --runstate S --uid $USER kitty | head -n 1)
if [ -z "$1" ]; then
	dir=$(pwd)
else
	dir=$1
fi
if [ -n $pid ]; then
	id=$(kitty @ --to "unix:@kittyc1748-$pid" launch --type=tab --cwd "$dir")
	kitty @ --to "unix:@kittyc1748-$pid" focus-window
	kitty @ --to "unix:@kittyc1748-$pid" focus-tab -m id:$id
else
	kitty -d "$dir"
fi
